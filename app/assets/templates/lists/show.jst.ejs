<style>
  .list { list-style-type: none; margin: 0; padding: 0; float: left; margin-right: 10px; background: #eee; padding: 5px; width: 140px;}
  
  .new-list { list-style-type: none; margin: 0; padding: 0; float: left; margin-right: 10px; background: #eee; padding: 5px; width: 140px;}
  
  .new-list-form {
    padding: 0px;

  }
  
  button.new-list-form {
    width: 100px;
    height: 20px;
  }
</style>


<script>
$(function() {
  $( '.list-container' ).sortable({
    // connectWith: "[data-id='list']",
    items: ".list",
    tolerance: "pointer",
    // helper: "clone",
    // placeholder: ".container-placeholder"
  });
  
  $( "ul.list" ).sortable({
    connectWith: "ul.list",
    // tolerance: "pointer",
    // items: "[data-id='card']"
  });
  
  $( ".list" ).disableSelection();
    });
</script>

<section class='list-container'>
  <% lists.each(function (list) { %>
    <ul class="btn-large list">
      <%= list.escape("title") %>
      <br>
      <% var cards = list.attributes.cards %>
    
      <% if(cards != undefined ){ %>
        <% cards.forEach(function(card) { %>
          <li class="btn card">
            <%= card.title %>
          </li> 
        <% }) %>
      <% } %>
      <div>
      <a class='add-card' href='#'>add a card...</a>
        <div class='add-card-form' style='display: none;'>
          <form class='add-card-form'>
          <input 
            class='add-card-form' 
            type='text' 
            name='card[title]' 
            placeholder='insert new card'>
    
            <input class='add-card-form' type='submit'>
          </form>
        </div>
      </div>
      </ul>
  <% }); %>
</section>

<div class='btn-large new-list'>Add a new list</div>

<div class='btn-large new-list-form' style="display: none;">
  <form class='new-list-form'>
  <input 
    class='new-list-form' 
    type='text' 
    name='list[title]' 
    placeholder='insert new title'>
    
    <input class='new-list-form' type='submit'>
  </form>
</div>
